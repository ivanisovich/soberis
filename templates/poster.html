<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Афиша | Фестиваль соберись</title>

    <link rel="stylesheet" href="../styles/global.css" />
    <link rel="stylesheet" href="../styles/poster.css" />
    <link
      href="https://fonts.cdnfonts.com/css/tt-firs-neue-trl"
      rel="stylesheet"
    />
    <link rel="icon" type="image/x-icon" href="../images/index/about.png" />
    <script src="../script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js"></script>
  </head>
  <body>
    <header class="header">
      <a href="../index.html">
        <img
          class="header__navigation"
          src="../images/poster/posert-nav.svg"
          alt=""
        />
      </a>
    </header>

    <div class="posters">
      <img class="poster" src="../images/poster/poster-1.png" alt="" />
      <img class="active poster" src="../images/poster/poster-2.png" alt="" />
      <img class="poster" src="../images/poster/poster-3.png" alt="" />
    </div>

    <div class="poster__list">
      <img src="../images/poster/poster-list.svg" alt="" />
      <div class="poster-btn"></div>
      <div class="poster-btn"></div>
      <div class="poster-btn"></div>
      <div class="poster-btn"></div>
      <div class="poster-btn"></div>
      <div class="poster-btn"></div>
      <div class="poster-btn"></div>
      <div class="poster-btn"></div>
      <div class="poster-btn"></div>
    </div>

    <div id="footer-container"></div>
    <script>
      document.addEventListener("click", (e) => {
        if (
          e.target.classList.contains("poster") &&
          !e.target.classList.contains("active")
        ) {
          

          const activePoster = document.querySelector(".poster.active");
          const clickedPoster = e.target;
          activePoster.style.height = "70%";

          // Calculate the translation distances
          const finalActiveStyle = {
            x:
              clickedPoster.getBoundingClientRect().left -
              activePoster.getBoundingClientRect().left,
            y:
              clickedPoster.getBoundingClientRect().top -
              activePoster.getBoundingClientRect().top,
          };
          const finalClickedStyle = {
            x:
              activePoster.getBoundingClientRect().left -
              clickedPoster.getBoundingClientRect().left,
            y:
              activePoster.getBoundingClientRect().top -
              clickedPoster.getBoundingClientRect().top,
          };

          // Add transition class
          activePoster.classList.add("transition");
          clickedPoster.classList.add("transition");

          // Apply transformations
        
          activePoster.style.transform = `translate(${finalActiveStyle.x}px, 0px)`;
         
          clickedPoster.style.transform = `translate(${finalClickedStyle.x}px, 0px)`;
          clickedPoster.style.height = "100%";
          // Swap the positions after the animation
          setTimeout(() => {
            // Remove the transformations
            activePoster.style.transform = "";
            clickedPoster.style.transform = "";

            // Remove transition class
            activePoster.classList.remove("transition");
            clickedPoster.classList.remove("transition");

            // Swap the active class
            activePoster.classList.remove("active");
            clickedPoster.classList.add("active");

            // Swap the positions in the DOM
            const parent = document.querySelector(".posters");
            const activePosterIndex = Array.from(parent.children).indexOf(
              activePoster
            );
            const clickedPosterIndex = Array.from(parent.children).indexOf(
              clickedPoster
            );

            if (activePosterIndex < clickedPosterIndex) {
              parent.insertBefore(clickedPoster, activePoster);
              parent.insertBefore(
                activePoster,
                parent.children[clickedPosterIndex]
              );
            } else {
              parent.insertBefore(activePoster, clickedPoster);
              parent.insertBefore(
                clickedPoster,
                parent.children[activePosterIndex]
              );
            }
          }, 0);
        }
      });
    </script>
  </body>
</html>
